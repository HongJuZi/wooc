var HHJsLib=window.HHJsLib={editor:{},$target:null,dict:{},curLang:'zh-cn',_initMap:[],importFiles:{js:{},css:{}},init:function(){$.each(this._initMap,function(loc,item){item[1].call(item[0])});return this},$:function(target){this.$target=$(target);return this},lang:function(mask){if('undefined'==typeof this.dict[this.curLang][mask]){return mask}return this.dict[this.curLang][mask]},mergeDict:function(subDict){for(var type in subDict){for(var mask in subDict[type]){if('undefined'==typeof(this.dict[type])){this.dict[type]={}}this.dict[type][mask]=subDict[type][mask]}}return this},register:function(obj,func){if('undefined'==typeof obj){return this}if(typeof func!='undefined'){this._initMap.push([obj,func]);return this}if('undefined'!=typeof obj.init){this._initMap.push([obj,obj.init])}return this},extend:function(props){for(var ele in props){this[ele]=props[ele]}return this}};HHJsLib.mergeDict({'zh-cn':{'CAN_NOT_EMPTY':'不能为空！','LEN_INAVALIBLE':'长度不符合要求，要求字符范围：','EMAIL_FORMAT_ERROR':'邮箱地址不合法！正确格式为：example@example.com。','PHONE_ERROR':'电话号码不合法！正确格式,如：13745623698 或 0745-2864032。','INAVALIBLE_NUMBER':'不是有效的数字！','CARD_ID_ERROR':"身份证号码格式不正确！",'HAS_INVALIDATE_INFO':"信息不正确，请认真核对！",'NOT_SUPPORT_THE_FILE_TYPE':'文件类型不支持，请参考上传说明！','NO_SELECTED':'没有选择'},'zh-tw':{'CAN_NOT_EMPTY':'不能爲空！','LEN_INAVALIBLE':'長度不符合要求，要求字符範圍：','EMAIL_FORMAT_ERROR':'郵箱地址不合法！正確格式爲：example@example.com','PHONE_ERROR':'電話號碼不合法！正確格式,如：13745623698 或 0745-2864032。','INAVALIBLE_NUMBER':'不是有效的數字！','CARD_ID_ERROR':"身份證號碼格式不正確！",'HAS_INVALIDATE_INFO':"信息不正確，請認真核對！",'NOT_SUPPORT_THE_FILE_TYPE':'文件類型不支持，請參考上傳說明！','NO_SELECTED':'沒有選擇'},'en':{'CAN_NOT_EMPTY':'Can not be empty!','LEN_INAVALIBLE':'length not avalible, the length should between: ','EMAIL_FORMAT_ERROR':'The email format is wrang, example admin@site.com.','INAVALIBLE_NUMBER':'The value is not a number!','CARD_ID_ERROR':"CardId number format error!",'HAS_INVALIDATE_INFO':"The file type not support, please see the comments clear!",'NO_SELECTED':'Not be selected!'}});HHJsLib.extend({dropMenu:function(target,subElementClass,currentClass){$(target).each(function(){var theSpan=$(this);var theMenu=theSpan.find(subElementClass);var tarHeight=theMenu.height();theMenu.css({height:0,opacity:0});theSpan.mouseenter(function(){$(this).addClass(currentClass);theMenu.stop().show().animate({height:tarHeight,opacity:1},400);var $this=$(this);$this.find(subElementClass).mouseleave(function(){$this.removeClass(currentClass);theMenu.stop().animate({height:0,opacity:0},400,function(){$(this).css({display:"none"})})})})});return this},parseUrl:function(content){return content.replace(/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/ig,'<a target="_blank" href="$1$2" rel="external nofollow">$1$2</a>')},isDateTime:function(value,name,format){var dateFormatMap={"yyyy/mm/dd hh:mm:ss":/^\d{4}\/\d{2}\/\d{2}\s\d{2}:\d{2}:\d{2}$/,"yyyy/mm hh:mm:ss":/^\d{4}\/\d{2}\s\d{2}:\d{2}:\d{2}$/,"yyyy-mm-dd hh:mm:ss":/^\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}$/,"yyyy-mm-dd hh:mm":/^\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}$/,"yyyy-mm hh:mm:ss":/^\d{4}-\d{2}\s\d{2}:\d{2}:\d{2}$/,"yyyymmdd hh:mm:ss":/^\d{8}\s\d{2}:\d{2}:\d{2}$/,"yyyymm hh:mm:ss":/^\d{6}\s\d{2}:\d{2}:\d{2}$/};if(typeof format=='undefined'){format='yyyy-mm-dd hh:mm:ss'}if(!dateFormatMap[format].test(value)){throw name+"时间格式不正确，请参考说明认真填写！";}},_isValidateByDom:function(func,target,params){try{params='undefined'==typeof params?[]:params;$(target).each(function(){HHJsLib.$target=$(this);params.unshift(HHJsLib.$target.val());func.apply(HHJsLib,params)});return this}catch(e){throw{message:e,dom:HHJsLib.$target}}},isUrl:function(url,name){var strRegex='^(https|http|ftp|rtsp|mms:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})';var re=new RegExp(strRegex, 'ig');if(false===re.test(url)){throw name+"Url地址不合法，正确格式如：http://www.example.com";}},isUrlByDom:function(target,name){return this._isValidateByDom(this.isUrl,target,[name])},isCheckedByDom:function(target,name){$(target).each(function(){if(1>$(this).find("input:checked").length){throw{dom:$(this),message:name+HHJsLib.lang('NO_SELECTED')}}})},isHasStr:function(str,needle,name,ch){if(typeof ch=='undefined'){var ch=','}if(0>str.indexOf(ch+needle+ch)){throw name+HHJsLib.lang('HAS_INVALIDATE_INFO');}return this},isHasStrByDom:function(target,str,name,ch){return this._isValidateByDom(this.isHasStr,target,[str,name,ch])},isNation:function(value){var nations=",汉族,壮族,满族,回族,苗族,维吾尔族,土家族,彝族,蒙古族,藏族,布依族,侗族,瑶族,朝鲜族,白族,哈尼族,哈萨克族,黎族,傣族,畲族,傈僳族,仡佬族,东乡族,高山族,拉祜族,水族,佤族,纳西族,羌族,土族,仫佬族,锡伯族,柯尔克孜族,达斡尔族,景颇族,毛南族,撒拉族,布朗族,塔吉克族,阿昌族,普米族,鄂温克族,怒族,京族,基诺族,德昂族,保安族,俄罗斯族,裕固族,乌兹别克族,门巴族,鄂伦春族,独龙族,塔塔尔族,赫哲族,珞巴族,";return this.isHasStr(nations,value,"民族")},isNationByDom:function(target){return this._isValidateByDom(this.isNation,target)},isIdCard:function(value){if(!(/(^d{15}$)|(^d{17}([0-9]|X)$)/.test(value))){throw HHJsLib.lang('CARD_ID_ERROR');}return this},isIdCardByDom:function(target){return this._isValidateByDom(this.isIdCard,target)},isEqualByDom:function(targets,name){if(!targets){return}var val=$(targets[0]).val();for(var i=1;i<targets.length;i++){if(val!==$(targets[i]).val()){throw{dom:$(targets[0]),message:name+'不一致！'}}}return this},isDateTimeByDom:function(target,name,format){return this._isValidateByDom(this.isDateTime,target,[name,format])},isDate:function(value,name,format){var dateFormatMap={"yyyy/mm/dd":/^\d{4}\/\d{2}\/\d{2}$/,"yyyy/mm":/^\d{4}\/\d{2}$/,"yyyy-mm-dd":/^\d{4}-\d{2}-\d{2}$/,"yyyy-mm":/^\d{4}-\d{2}$/,"yyyymmdd":/^\d{8}$/,"yyyymm":/^\d{6}$/};if(typeof format=='undefined'){format='yyyymmdd'}if(!dateFormatMap[format].test(value)){throw name+"时间格式不正确，请参考说明认真填写！";}value=value.replace(/-|\//g,"");var year=parseInt(value.substr(0,4));if(year>2037){throw name+"日期值太大，不能超过2037年！";}var month=parseInt(value.substr(4,2));if(12<month){throw name+"日期格式无效！";}var day=parseInt(value.substr(6,2));if(day>31){throw name+"日期格式无效！";}if(month==2&&day>29){throw name+"日期格式无效！2月最大只有29天~";}return this},isDateByDom:function(target,name,format){return this._isValidateByDom(this.isDate,target,[name,format])},isFileType:function(types){var path=this.$target.val();var regFileType=","+types+",";var fileType=","+path.substring(path.lastIndexOf('.'))+",";if(-1==regFileType.indexOf(fileType)){throw{message:HHJsLib.lang('NOT_SUPPORT_THE_FILE_TYPE'),dom:this.target}}return this},isIE:function(){return!-[1,]},isNumberByDom:function(target,name){return this._isValidateByDom(this.isNumber,target,[name])},isNumber:function(num,name){if(!/^-?\d+(\.\d)*$/.test(num)){throw name+HHJsLib.lang('INAVALIBLE_NUMBER');}return this},isPhoneByDom:function(target){return this._isValidateByDom(this.isPhone,target)},isPhone:function(value){var phoneRegExp=/^1[3584]?\d{5,9}$/;var telRegExp=/^(([0+]\d{2,3}-)?(0\d{2,3})-)?(\d{6,8})(-(\d{3,}))?$/;if(!phoneRegExp.test(value)&&!telRegExp.test(value)){throw HHJsLib.lang('PHONE_ERROR');}},isEmailByDom:function(target){return this._isValidateByDom(this.isEmail,target)},isEmail:function(value){var emailRegExp=/^(?:[a-zA-Z0-9]+[_\-\+\.]?)*[a-zA-Z0-9]+@(?:([a-zA-Z0-9]+[_\-]?)*[a-zA-Z0-9]+\.)+([a-zA-Z]{2,})+$/i;if(!emailRegExp.test(value)){throw HHJsLib.lang('EMAIL_FORMAT_ERROR');}return this},isStrLenByDom:function(target,name,min,max){return this._isValidateByDom(this.isStrLen,target,[name,min,max])},isStrLen:function(value,name,min,max){var lenInfo='undefined'===typeof(max)?min+'个字符以上':min+'～'+max;if(!value||value.length<min||max<value.length){throw name+HHJsLib.lang('LEN_INAVALIBLE')+lenInfo+"。";}return this},isEmptyByDom:function(target,name,def){if('undefined'==typeof(def)&&$(target).attr('data-def')){def=$(target).attr('data-def')}return this._isValidateByDom(this.isEmpty,target,[name,def])},isEmpty:function(value,name,def){try{if(typeof value=='undefined'||value==''){throw name+HHJsLib.lang('CAN_NOT_EMPTY');}if(arguments.length==3&&value==def){throw name+HHJsLib.lang('CAN_NOT_EMPTY');}return arguments.length==1?false:this}catch(e){if(arguments.length==1){return true}throw e;}return this},autoCheckbox:function(target){$(target).each(function(){var curValue=$(this).attr("data-cur");if(curValue==""){return true}$(this).find("input:checkbox").each(function(){var optionValue=$(this).val();if(-1<curValue.indexOf(","+optionValue+",")){$(this).attr('checked','checked');return true}$(this).attr('checked',null)})});return this},autoRadio:function(target){$(target).each(function(){var curValue=$(this).attr("data-cur");if(curValue==""){return true}$(this).find("input:radio").each(function(){var optionValue=$(this).val();if(optionValue==curValue){$(this).attr('checked','checked');return false}$(this).attr('checked',null)})});return this},autoMultiSelect:function(target){var curValue=$(target).attr("data-cur");if(""==curValue){return}$(target+" > option").each(function(){var optionValue=$(this).val();if(-1!=curValue.indexOf(","+optionValue+",")){$(this).attr('selected','selected')}});return this},autoSelect:function(target){$(target).each(function(){var curValue=$(this).attr("data-cur");if(""==curValue){return true}$(this).find("option").each(function(){var optionValue=$(this).val();if(optionValue==curValue){$(this).attr('selected',true)}})});return this},toTw:function(cc){var str='';for(var i=0;i<cc.length;i++){if(this.zhCn.indexOf(cc.charAt(i))!=-1){str+=this.zhTw.charAt(this.zhCn.indexOf(cc.charAt(i)))}else{str+=cc.charAt(i)}}return str},toCn:function(cc){var str='';for(var i=0;i<cc.length;i++){if(this.zhTw.indexOf(cc.charAt(i))!=-1){str+=this.zhCn.charAt(this.zhTw.indexOf(cc.charAt(i)))}else{str+=cc.charAt(i)}}return str},filterLoadedCss:function(cssPath){if(1>this.importFiles.css.length){for(var item in window.document.styleSheets){var hash=hex_md5(window.document.styleSheets[item].href);this.importFiles.css[hash]=window.document.styleSheets[item].href}}for(var ele in cssPath){var fHash=hex_md5(cssPath[ele]);if('undefined'!==typeof(this.importFiles.css[fHash])){cssPath.splice(ele,1);continue}this.importFiles.css[fHash]=cssPath[ele]}return cssPath},filterLoadedJs:function(jsPath){if(1>this.importFiles.js.length){for(var item in window.document.scripts){var hash=hex_md5(window.document.scripts[item].href);this.importFiles.js[hash]=window.document.scripts[item].href}}for(var ele in jsPath){var fHash=hex_md5(jsPath[ele]);if('undefined'!==typeof(this.importFiles.js[fHash])){jsPath.splice(ele,1);continue}this.importFiles.js[fHash]=jsPath[ele]}return jsPath},importCss:function(cssPath){var cssLinks="";var cssHtml='<link rel="stylesheet" type="text/css" href="{href}" />';cssPath=this.filterLoadedCss(cssPath);for(var i in cssPath){cssLinks+=cssHtml.replace('{href}',cssPath[i])}$('head').first().append(cssLinks);return this},importJs:function(jsPath,callback){jsPath=this.filterLoadedJs(jsPath);require(jsPath,function(param){if(typeof callback!='undefined'){callback()}})},getFileExt:function(path){var file=path.substring(path.lastIndexOf('/'));var start=file.indexOf('.')+1;var end=file.indexOf('?');if(-1<end){return path.substring(start,end)}return path.substring(start)},extend:function(props){for(var ele in props){this[ele]=props[ele]}return this},register:function(obj,func){if('undefined'==typeof obj){return this}if(typeof func!='undefined'){this._initMap.push([obj,func]);return this}if('undefined'!=typeof obj.init){this._initMap.push([obj,obj.init])}return this},mergeDict:function(subDict){for(var type in subDict){for(var mask in subDict[type]){if('undefined'==typeof(this.dict[type])){this.dict[type]={}}this.dict[type][mask]=subDict[type][mask]}}return this},lang:function(mask){if('undefined'==typeof this.dict[this.curLang][mask]){return mask}return this.dict[this.curLang][mask]},$:function(target){this.$target=$(target);return this},init:function(){$.each(this._initMap,function(loc,item){item[1].call(item[0])});return this},dialog:function(msg,type,callback){this.focusTarget(msg.dom);if('confirm'!==type){alert(this.getMessage(msg));return false}if(confirm(msg)){return'undefined'===typeof(callback)?false:callback()}return false},getMessage:function(msg){return'object'==typeof msg?msg.message:msg},focusTarget:function(target){if(typeof target!=='undefined'){typeof target==='object'?target.focus():$(target).first().focus()}},confirm:function(msg,callback){return this.dialog(msg,'confirm',callback)},succeed:function(msg){return this.dialog(msg,'success')},error:function(msg){return this.dialog(msg,'error')},warn:function(msg){return this.dialog(msg,'warning')},alert:function(msg){return this.dialog(msg,'alert')},info:function(msg){return this.dialog(msg,'info')},bindUploadify:function(baseUrl,options){var _this=this;this.importCss([baseUrl+"/uploadify/uploadify.css"]);this.importJs([baseUrl+"/uploadify/jquery.uploadify.min.js"],function(){var defOpts={'auto':true,'height':30,'width':120,'multi':true,'buttonText':"选择文件",'buttonImage':baseUrl+"/uploadify/browse-btn.png",'swf':baseUrl+"/uploadify/uploadify.swf",'uploader':siteUrl+"/index.jsp/admin/user/uploadimage"};if('object'===typeof(options)){for(var ele in options){defOpts[ele]=options[ele]}}_this.$target.uploadify(defOpts)});return this},bindLightBox:function(target,baseUrl){this.importCss([baseUrl+"/lightbox.css"]);this.importJs([baseUrl+"/lightbox.js"],function(){$(target).lightBox({overlayBgColor:'#ccc',overlayOpacity:0.6,imageLoading:baseUrl+'/lightbox-ico-loading.gif',imageBtnClose:baseUrl+'/lightbox-btn-close.gif',imageBtnPrev:baseUrl+'/lightbox-btn-prev.gif',imageBtnNext:baseUrl+'/lightbox-btn-next.gif',imageBlank:baseUrl+'/lightbox-blank.gif',containerResizeSpeed:350,txtImage:'Imagem',txtOf:'de'})});return this},bindDate:function(baseUrl,format){if(typeof format=='undefined'){format='yy-mm-dd'}$(this.$target).datepicker({clickInput:true,changeMonth:true,changeYear:true,dateFormat:format});return this},bindWysiwyg:function(target,baseUrl,model){var _this=this;this.importCss([baseUrl+"/jquery.wysiwyg.css"]);this.importJs([baseUrl+"/jquery.wysiwyg.js"],function(){_this.$target.wysiwyg()});return this},bindEditor:function(target,baseUrl,editor,model){if(1>$('#'+target).length){return}model=this._getEditorModel(model);switch(editor){case'ueditor':this.bindUeditor(target,baseUrl,model);break;case'xheditor':this.bindXheditor(target,baseUrl,model);break;case'tinymce':this.bindTinymce(target,baseUrl,model);break;case'wysiwyg':default:this.bindWysiwyg(target,baseUrl,model);break}return this},_getEditorModel:function(model){if(typeof model=='undefined'){return'full'}if(-1=='full,simple,base'.indexOf(model)){return'full'}return model},bindUeditor:function(target,baseUrl,model){var modelMap={full:[['fullscreen','source','|','undo','redo','|','bold','italic','underline','strikethrough','superscript','subscript','removeformat','formatmatch','autotypeset','blockquote','pasteplain','|','forecolor','backcolor','insertorderedlist','insertunorderedlist','selectall','cleardoc','|','rowspacingtop','rowspacingbottom','lineheight','|','customstyle','paragraph','fontfamily','fontsize','|','directionalityltr','directionalityrtl','indent','|','justifyleft','justifycenter','justifyright','justifyjustify','|','touppercase','tolowercase','|','link','unlink','anchor','|','imagenone','imageleft','imageright','imagecenter','|','insertimage','emotion','scrawl','insertvideo','music','attachment','map','gmap','pagebreak','insertcode','insertframe','template','background','|','horizontal','date','time','spechars','snapscreen','wordimage','|','inserttable','deletetable','insertparagraphbeforetable','insertrow','deleterow','insertcol','deletecol','mergecells','mergeright','mergedown','splittocells','splittorows','splittocols','|','print','preview','searchreplace','help']],simple:[['fullscreen','|','undo','redo','|','bold','italic','underline','strikethrough','superscript','subscript','removeformat','formatmatch','autotypeset','blockquote','pasteplain','|','forecolor','backcolor','insertorderedlist','insertunorderedlist','selectall','cleardoc','|','rowspacingtop','rowspacingbottom','lineheight','|','customstyle','paragraph','fontfamily','fontsize','|','directionalityltr','directionalityrtl','indent','|','justifyleft','justifycenter','justifyright','justifyjustify','|','touppercase','tolowercase','|','link','unlink','anchor','|','insertimage','imagenone','imageleft','imageright','imagecenter','|','horizontal','date','time','spechars','|','print']],base:[['fullscreen','|','undo','redo','|','bold','italic','underline','strikethrough','superscript','subscript','removeformat','formatmatch','selectall','cleardoc','|','directionalityltr','directionalityrtl','indent','|','customstyle','paragraph','fontfamily','fontsize','|','justifyleft','justifycenter','justifyright','justifyjustify','|','print']],album:[['fullscreen','insertimage']]};window.UEDITOR_HOME_URL=baseUrl+"/";var $target=$('#'+target);return this.importJs([baseUrl+"/ueditor.config.js",baseUrl+"/ueditor.all.min.js"],function(){var width=""!=$target.attr("width")?parseInt($target.attr("width")):800;var height=""!=$target.attr("height")?parseInt($target.attr("height")):100;HHJsLib.editor[target]=UE.getEditor(target,{initialContent:'',theme:"default",lang:'zh-cn',initialFrameWidth:width,initialFrameHeight:height,toolbars:modelMap[model]})});return this},maskStatus:function(map){this.$target.each(function(){var value=$.trim($(this).html());if(typeof map[value]!='undefined'){$(this).addClass(map[value])}});return this},printPriview:function(target,callback,title){$(target).click(function(){var content=callback();var htmlTpl="<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html xmlns=\"http://www.w3.org/1999/xhtml\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=8\"><head>{link}<style text=\"text/css\">.print-btn-line { text-align: right; padding-right: 10px;}.print-page { width: 1000px; margin: 0px auto; padding-bottom: 10px; }.page-title { text-align: center; }{style}</style></head><p class=\"print-btn-line\"><a href=\"javascript:void(0);\" id=\"start-print-id\">点击确认打印</a></p>{title}<div class=\"print-page\" id=\"content-id\">{content}</div><script type=\"text/javascript\">document.getElementById(\"start-print-id\").onclick = function() {this.innerHTML = '';window.print();this.innerHTML = '点击确认打印'}</script></html>";newWindow=window.open("","打印预览","fullscreen");newWindow.title="打印预览";newWindow.document.open("text/html","replace");newWindow.moveBy(0,0);newWindow.resizeTo(window.screen.availWidth,window.screen.availHeight);var links="";$("link").each(function(){links+="<link rel=\"stylesheet\" href=\""+$(this).attr("href")+"\" type=\"text/css\" />"});var styles="";$("style").each(function(){styles+=$(this).html()});htmlTpl=htmlTpl.replace(/{link}/,links);htmlTpl=htmlTpl.replace(/{style}/,styles);if(typeof title!='undefined'&&""!=title){htmlTpl=htmlTpl.replace(/{title}/,"<h3 class=\"page-title\">"+title+"</h3>")}else{htmlTpl=htmlTpl.replace(/{title}/,"")}htmlTpl=htmlTpl.replace(/{content}/,content);newWindow.document.write(htmlTpl);newWindow.document.close()})},deleteTableColumn:function(subInfo){if(typeof subInfo=='undefined'){return this.$target[0].outerHTML}var row=-1;this.$target.find("tr").each(function(){row++;var subColumns=[];if(typeof subInfo[row]!='undefined'){subColumns=subInfo[row]}else if(typeof subInfo['a']!='undefined'){subColumns=subInfo['a']}for(var i=0;i<subColumns.length;i++){$(this).find("td:eq("+(subColumns[i]-i)+")").remove()}});return this.$target[0].outerHTML},setCaretPosition:function(target,pos){target.focus();if(target.setSelectionRange){target.setSelectionRange(pos,pos)}else if(target.createTextRange){var range=target.createTextRange();range.collapse(true);range.moveEnd('character',pos);range.moveStart('character',pos);range.select()}},getCursortPosition:function(target){var CaretPos=0;if(document.selection){target.focus();var Sel=document.selection.createRange();Sel.moveStart('character',-target.value.length);CaretPos=Sel.text.length}else if(target.selectionStart||target.selectionStart=='0'){CaretPos=target.selectionStart}return CaretPos},insertAtCaret:function(target,str){if('undefined'===typeof(target)){return}target.focus();if(document.all){if(target.createTextRange&&target.caretPos){var caretPos=target.caretPos;caretPos.text=caretPos.text.charAt(caretPos.text.length-1)==''?str+'':str}else{target.value=str}return}if(target.setSelectionRange){var rangeStart=target.selectionStart;var rangeEnd=target.selectionEnd;var tempStr1=target.value.substring(0,rangeStart);var tempStr2=target.value.substring(rangeEnd);target.value=tempStr1+str+tempStr2;return}HHJsLib.warn("您当前的浏览器版本不支持setSelectionRange，请升级到最新版本！")},parseUrlByDom:function(target){var _root=this;$(target).each(function(){$(this).html(_root.parseUrl($(this).html()))})},formatFileSize:function(size){if(1024>size){return 0==size?'未知':size+'Bytes'}if(1048756>size){return this.float(size/1024,2)+'KB'}if(1073741824>size){return this.float(size/1048756,2)+'M'}if(1099511627776>size){return this.float(size/1073741824,2)+'G'}if(1125899906842624>$size){return this.float(size/1099511627776,2)+'T'}},formatSendTime:function(datetime){var date=new Date();var curYear=date.getFullYear();var curMonth=date.getMonth()+1;var curDay=date.getDate();var curHour=date.getHours();var curMin=date.getMinutes();var dateTimeInfo=datetime.split(' ');var dateInfo=dateTimeInfo[0].split('-');var timeInfo=dateTimeInfo[1].split(':');if(0<curYear-parseInt(dateInfo[0])){return datetime}if(0<curMonth-parseInt(dateInfo[1])){return datetime}var passTime=0>=curDay-parseInt(dateInfo[2])?'':curDay-parseInt(dateInfo[2])+'天';passTime+=0>=curHour-parseInt(timeInfo[0])?'':curHour-parseInt(timeInfo[0])+'小时';passTime+=0>=curMin-parseInt(timeInfo[1])?'':curMin-parseInt(timeInfo[1])+'分';if(''===passTime){var curSec=date.getSeconds();return 20>curSec-parseInt(timeInfo[2])?'刚刚':curSec-parseInt(timeInfo[2])+'秒'}return passTime+'以前'},addFavorite:function(URL,title){try{window.external.addFavorite(URL,title)}catch(e){try{window.sidebar.addPanel(title,URL,"")}catch(e){alert("加入收藏失败，请使用Ctrl+D进行添加")}}return this},setHomePage:function(obj,val){try{obj.style.behavior='url(#default#homepage)';obj.setHomePage(val)}catch(e){if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(e){alert("此操作被浏览器拒绝！")}var prefs=Components.classes['@mozilla.org/preferences-service;1'].getService(Components.interfaces.nsIPrefBranch);prefs.setCharPref('browser.startup.homepage',val)}}},fieldHint:function(target){$(target).each(function(){var $this=$(this);var def=!$this.val()&&$this.attr('data-def')?$this.attr('data-def'):$this.val();$(this).val(def).css('color','#999').click(function(){if($(this).attr('data-def')==$(this).val()){$(this).val("")}$(this).css('color','#000')}).blur(function(){if(''==$(this).val()){$(this).val($(this).attr('data-def'));$(this).css('color','#999')}})});return this},slideUpDown:function(target,callback){$(target).click(function(){$(this).parent().siblings().find("ul").slideUp("normal");$(this).next().slideToggle("normal");if(typeof callback!='undefined'){callback($(this))}return true});return this},redirect:function(url,target){if(typeof target=='undefined'){target='self'}switch(target){case'blank':window.open(url);break;case'self':default:window.location.href=url;break}},goTop:function(target){$(target).hide();$(window).scroll(function(){if($(this).scrollTop()>100){$(target).fadeIn()}else{$(target).fadeOut()}});$(target).click(function(){$('body,html').animate({scrollTop:0},800);return false});return this},highLightElement:function(target,currentClass,level,callback){return this.highLightElementByUrl(window.location.href,target,currentClass,level,callback)},highLightElementByUrl:function(url,target,currentClass,level,callback){var shortUrl=url.substring(url.lastIndexOf('/')+1);url=decodeURIComponent(url);$(target).each(function(){$(this).find('a').each(function(){var curHref=decodeURIComponent($(this).attr('href'));if(typeof curHref!=='undefined'&&curHref!==''){if(curHref===url||curHref===shortUrl){var targetDom=curTargetDom=$(this);if(level<0){for(var i=0;i>level;i--){targetDom=jQuery(targetDom).children('a')}}else if(level>0){for(var i=0;i<level;i++){targetDom=jQuery(targetDom).parent()}}if(typeof callback!='undefined'){callback(targetDom,curTargetDom[0])}$(targetDom[0]).addClass(currentClass);return false}}})})}});$(function(){HHJsLib.init()});